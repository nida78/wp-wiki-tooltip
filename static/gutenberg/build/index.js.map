{"version":3,"file":"index.js","mappings":"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","sources":["webpack://wp-wiki-tooltip/./src/editor.scss","webpack://wp-wiki-tooltip/external window [\"wp\",\"blockEditor\"]","webpack://wp-wiki-tooltip/external window [\"wp\",\"components\"]","webpack://wp-wiki-tooltip/external window [\"wp\",\"element\"]","webpack://wp-wiki-tooltip/external window [\"wp\",\"i18n\"]","webpack://wp-wiki-tooltip/external window [\"wp\",\"richText\"]","webpack://wp-wiki-tooltip/webpack/bootstrap","webpack://wp-wiki-tooltip/webpack/runtime/compat get default export","webpack://wp-wiki-tooltip/webpack/runtime/define property getters","webpack://wp-wiki-tooltip/webpack/runtime/hasOwnProperty shorthand","webpack://wp-wiki-tooltip/webpack/runtime/make namespace object","webpack://wp-wiki-tooltip/./src/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"richText\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { applyFormat, registerFormatType, toggleFormat, useAnchor } from '@wordpress/rich-text';\r\nimport { Popover, SelectControl, TextControl, ToolbarGroup, ToolbarButton } from '@wordpress/components';\r\nimport { BlockControls } from '@wordpress/block-editor';\r\nimport { __, _x } from \"@wordpress/i18n\";\r\n\r\nimport './editor.scss';\r\n\r\nconst WikiFormatName = 'wp-wiki-tooltip/tooltip-edit';\r\nconst WikiFormatClass = 'wiki-tooltip-has-data';\r\nconst WikiFormatTag = 'wiki';\r\n\r\nlet BaseList = [];\r\nBaseList.push( { value: 'standard', label: __('Standard base', 'wp-wiki-tooltip') } )\r\nBaseList.push( { value: '', label: '---', disabled: true } )\r\nfor( let elem in wp_wiki_tooltip_mce.wiki_urls.data ) {\r\n    if( elem !== '###NEWID###' ) {\r\n        let value = wp_wiki_tooltip_mce.wiki_urls.data[ elem ][ 'id' ];\r\n        BaseList.push( { value: value, label: value } );\r\n    }\r\n}\r\n\r\nconst WikiTooltipEdit = ( props ) => {\r\n\r\n    const { contentRef, isActive } = props;\r\n\r\n    const getTag = ( current ) => {\r\n\r\n        let result = 'UNDEF';\r\n\r\n        if( ( current != null ) && ( 'tagName' in current ) ) {\r\n\r\n            try {\r\n                result = current.tagName;\r\n            } catch ( e ) {\r\n                // nothing to do in case of an error\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    const getAnchor = () => {\r\n        let newAnchor = useAnchor( { editableContentElement: contentRef.current, settings: WikiTooltipFormat } );\r\n\r\n        if( isActive && ( 'WIKI' !== getTag( newAnchor ) )  ) {\r\n            // try to get text selection\r\n            const selection = document.defaultView.getSelection();\r\n            newAnchor = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\r\n        }\r\n\r\n        return newAnchor;\r\n    }\r\n\r\n    const anchorRef = getAnchor();\r\n\r\n    const tooltipValue = {\r\n        title: ( props.activeAttributes.title === undefined ) ? '' : props.activeAttributes.title,\r\n        section: ( props.activeAttributes.section === undefined ) ? '' : props.activeAttributes.section,\r\n        base: ( props.activeAttributes.base === undefined || props.activeAttributes.base === '' ) ? 'standard' : props.activeAttributes.base,\r\n        thumbnail: ( props.activeAttributes.thumbnail === undefined || props.activeAttributes.thumbnail === '' ) ? 'standard' : props.activeAttributes.thumbnail,\r\n    };\r\n\r\n    const onChangeTitle = ( value ) => {\r\n        onChangeTooltip( 'title', value );\r\n    }\r\n\r\n    const onChangeSection = ( value ) => {\r\n        onChangeTooltip( 'section', value );\r\n    }\r\n\r\n    const onChangeBase = ( value ) => {\r\n        onChangeTooltip( 'base', value );\r\n    }\r\n\r\n    const onChangeThumbnail = ( value ) => {\r\n        onChangeTooltip( 'thumbnail', value );\r\n    }\r\n\r\n    const onChangeTooltip = ( attribute, newValue ) => {\r\n        const newTooltipValues = {\r\n            title: '',\r\n            section: '',\r\n            base: '',\r\n            thumbnail: '',\r\n        };\r\n\r\n        // read current format data\r\n        if ( props.activeAttributes ) {\r\n            if ( props.activeAttributes.title ) {\r\n                newTooltipValues.title = props.activeAttributes.title;\r\n            }\r\n            if ( props.activeAttributes.section ) {\r\n                newTooltipValues.section = props.activeAttributes.section;\r\n            }\r\n            if ( props.activeAttributes.base ) {\r\n                newTooltipValues.base = props.activeAttributes.base;\r\n            }\r\n            if ( props.activeAttributes.thumbnail ) {\r\n                newTooltipValues.thumbnail = props.activeAttributes.thumbnail;\r\n            }\r\n        }\r\n\r\n        // update changed values\r\n        if ( 'title' === attribute ) {\r\n            newTooltipValues.title = newValue;\r\n        } else if ( 'section' === attribute ) {\r\n            newTooltipValues.section = newValue;\r\n        } else if ( 'base' === attribute ) {\r\n            newTooltipValues.base = newValue;\r\n        } else if ( 'thumbnail' === attribute ) {\r\n            newTooltipValues.thumbnail = newValue;\r\n        }\r\n\r\n        if( newTooltipValues.title === '' ) {\r\n            delete newTooltipValues.title;\r\n        }\r\n        if( newTooltipValues.section === '' ) {\r\n            delete newTooltipValues.section;\r\n        }\r\n        if( newTooltipValues.base === '' || newTooltipValues.base === 'standard' ) {\r\n            delete newTooltipValues.base;\r\n        }\r\n        if( newTooltipValues.thumbnail === '' || newTooltipValues.thumbnail === 'standard' ) {\r\n            delete newTooltipValues.thumbnail;\r\n        }\r\n\r\n        props.onChange( applyFormat(\r\n            props.value,\r\n            {\r\n                type: WikiFormatName,\r\n                attributes: newTooltipValues,\r\n            }\r\n        ) );\r\n    }\r\n\r\n    const onClickToolbarButton = () => {\r\n        props.onChange( toggleFormat(\r\n            props.value,\r\n            {\r\n                type: WikiFormatName\r\n            }\r\n        ) );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            { ! isActive && (\r\n                <BlockControls>\r\n                    <ToolbarGroup>\r\n                        <ToolbarButton\r\n                            icon={ 'admin-comments' }\r\n                            title={ _x( 'add Wiki Tooltip', 'editor popup', 'wp-wiki-tooltip' ) }\r\n                            onClick={ onClickToolbarButton }\r\n                            isActive={ isActive }\r\n                        />\r\n                    </ToolbarGroup>\r\n                </BlockControls>\r\n            ) }\r\n            { isActive && (\r\n                <>\r\n                    <BlockControls>\r\n                        <ToolbarGroup>\r\n                            <ToolbarButton\r\n                                icon={ 'welcome-comments' }\r\n                                title={ _x( 'remove Wiki Tooltip', 'editor popup', 'wp-wiki-tooltip' ) }\r\n                                onClick={ onClickToolbarButton }\r\n                                isActive={ isActive }\r\n                            />\r\n                        </ToolbarGroup>\r\n                    </BlockControls>\r\n                    { ( 'WIKI' === getTag( anchorRef ) ) && (\r\n                        <>\r\n                            <Popover\r\n                                headerTitle={ _x('WP Wiki Tooltip', 'editor popup', 'wp-wiki-tooltip' ) }\r\n                                className={ 'wiki-tooltip-data-popover' }\r\n                                anchor={ anchorRef }\r\n                                placement={ 'bottom-center' }\r\n                                noArrow={ false }\r\n                                offset={ 5 }\r\n                            >\r\n                                <p className={ 'wiki-tooltip-head' }>{ _x( 'Change tooltip settings here. Changes are stored immediately.', 'editor popup', 'wp-wiki-tooltip' ) }</p>\r\n                                <TextControl\r\n                                    label={ _x('Different Wiki page title', 'editor popup', 'wp-wiki-tooltip' ) }\r\n                                    help={ _x('Enter the title of the requested Wiki page if it differs from the selected text.', 'editor popup', 'wp-wiki-tooltip' ) }\r\n                                    className={ 'wiki-tooltip-input-title' }\r\n                                    value={ tooltipValue.title }\r\n                                    onChange={ onChangeTitle }\r\n                                />\r\n                                <TextControl\r\n                                    label={ _x('Section title', 'editor popup', 'wp-wiki-tooltip' ) }\r\n                                    help={ _x('Enter the title (anchor) of the requested section in Wiki page.', 'editor popup', 'wp-wiki-tooltip' ) }\r\n                                    className={ 'wiki-tooltip-input-section' }\r\n                                    value={ tooltipValue.section }\r\n                                    onChange={ onChangeSection }\r\n                                />\r\n                                <SelectControl\r\n                                    label={ _x('Wiki base', 'editor popup', 'wp-wiki-tooltip' ) }\r\n                                    help={ _x('Select one of the defined Wiki bases. Visit the settings page to create a new one.', 'editor popup', 'wp-wiki-tooltip' ) }\r\n                                    className={ 'wiki-tooltip-input-base' }\r\n                                    value={ tooltipValue.base }\r\n                                    onChange={ onChangeBase }\r\n                                    options={ BaseList }\r\n\r\n                                />\r\n                                <SelectControl\r\n                                    label={ _x('Show thumbnail', 'editor popup', 'wp-wiki-tooltip' ) }\r\n                                    help={ _x('Show a thumbnail in the tooltip?','editor popup', 'wp-wiki-tooltip' ) }\r\n                                    className={ 'wiki-tooltip-input-thumbnail' }\r\n                                    value={ tooltipValue.thumbnail }\r\n                                    onChange={ onChangeThumbnail }\r\n                                    options={ [\r\n                                        { value: 'standard', label: _x('use plugin default value', 'editor popup', 'wp-wiki-tooltip' ) },\r\n                                        { value: '', label: '---', disabled: true },\r\n                                        { value: 'on', label: _x('yes', 'editor popup', 'wp-wiki-tooltip' ) },\r\n                                        { value: 'off', label: _x('no', 'editor popup', 'wp-wiki-tooltip' ) },\r\n                                    ] }\r\n\r\n                                />\r\n                            </Popover>\r\n                        </>\r\n                    ) }\r\n                </>\r\n            ) }\r\n        </>\r\n    );\r\n};\r\n\r\nlet WikiTooltipFormat = registerFormatType(\r\n    WikiFormatName,\r\n    {\r\n        attributes: {\r\n            title: 'title',\r\n            section: 'section',\r\n            base: 'base',\r\n            thumbnail: 'thumbnail',\r\n        },\r\n\r\n        title: 'WP Wiki Tooltip',\r\n        tagName: WikiFormatTag,\r\n        className: WikiFormatClass,\r\n        edit: WikiTooltipEdit,\r\n    }\r\n);\r\n"],"names":["applyFormat","registerFormatType","toggleFormat","useAnchor","Popover","SelectControl","TextControl","ToolbarGroup","ToolbarButton","BlockControls","__","_x","WikiFormatName","WikiFormatClass","WikiFormatTag","BaseList","push","value","label","disabled","elem","wp_wiki_tooltip_mce","wiki_urls","data","WikiTooltipEdit","props","contentRef","isActive","getTag","current","result","tagName","e","getAnchor","newAnchor","editableContentElement","settings","WikiTooltipFormat","selection","document","defaultView","getSelection","rangeCount","getRangeAt","anchorRef","tooltipValue","title","activeAttributes","undefined","section","base","thumbnail","onChangeTitle","onChangeTooltip","onChangeSection","onChangeBase","onChangeThumbnail","attribute","newValue","newTooltipValues","onChange","type","attributes","onClickToolbarButton","createElement","Fragment","icon","onClick","headerTitle","className","anchor","placement","noArrow","offset","help","options","edit"],"sourceRoot":""}